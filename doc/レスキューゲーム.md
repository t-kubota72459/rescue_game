# セットアップ

1. 基盤と Arduino ケーブルをつなぐ
1. 基盤と フィールドケーブルをつなぐ
1. 基盤に 12V(1A) AC アダプタをつなぐ
2. Rasbperry Pi に USB (5V) をつなぐ

Raspberry Pi から Arduino に給電され、自動的に SD カードの 1 曲目が再生される。
Raspberry Pi ではレスキューゲームが自動起動する。

# レスキューゲームを起動する

自動起動されるため、再起動すれば以下は不要。

```[sh]
$ cd proj
$ python main.py
```

# フィールドマップ

スタートに近い順に A, B, C と命名されている。

# ゲーム

初期状態で 10 秒以上、放っておくと自動的に BGM が流れる。
このとき、音声のボリュームを調整できる（ゲーム中はボリューム調整できない）。 GUI を操作すると (ボタンを押す、タブを切り替えるなど) BGM は自動的に止まる。

## ボタンの役割

### [とうろく] 

おなまえに入力された名前を記録し、フィールドのカプセルやセンサーの状態が初期状態になっているかを確認する。エラーが出たら状態を確認する。状態が正常であれば、生存者カプセルの位置が自動的にシャッフルされる。[とうろく] ボタンはゲーム開始前なら、何度でもやり直すことができる。  
[スタート] ボタンが有効になり、のこりじかんが 02:00 に設定される。

### [スタート]

ゲーム開始の BGM が流れる。スタートの光電センサーが H になる(ロボが動き出す) と、のこりじかんの減算が始まる。

## ゲーム終了条件

以下の３つの条件のいずれかが成立したとき：

- 成功　：生存者のカプセル位置の近接センサーが H で、病院に２分以内にカプセルが入る
- 失敗１：生存者のカプセル位置の近接センサーが L (置かれたまま) で、病院に２分以内にカプセルが入る
- 失敗２：のこりじかんが 0 になる

## ゲーム状態遷移

ゲームの状態遷移図を示す。

![状態遷移図](state-1.png)
